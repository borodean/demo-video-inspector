(this.webpackJsonpmegogo=this.webpackJsonpmegogo||[]).push([[0],{31:function(e,t,n){e.exports=n(43)},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),i=n(5),s=function(e){return{type:"START_REGION",date:e}},u=function(e){return{type:"END_REGION",date:e}},l=n(2),f=n(21),d=n(22),g=n(1),h=n(12),m=n(28),b=n(30),O=n(23),v=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"updateChart",value:function(e){Object(h.a)(Object(g.a)(n.prototype),"updateChart",this).call(this,e),e.regions?this.chart.regions(e.regions):this.chart.regions&&!e.regions&&this.chart.regions([]),Object(h.a)(Object(g.a)(n.prototype),"loadNewData",this).call(this,e.data)}}]),n}(n.n(O).a),p={height:320,width:400},j=function(e){return Math.round(e/1024)},E={axis:{x:{tick:{format:function(e){return e.toLocaleString(void 0,{hour:"numeric",minute:"numeric",second:"numeric"})}},type:"timeseries"},y:{label:"\u041a\u0431\u0438\u0442/\u0441",tick:{format:j}},y2:{label:"\u0441",show:!0}},size:{height:p.height,width:2*p.width},tooltip:{format:{value:function(e,t,n){return"Q"===n||"W"===n?j(e)+" \u041a\u0431\u0438\u0442/\u0441":"B"===n?e+" \u0441":void 0}}}},y={axes:{B:"y2"},keys:{x:"date",value:["B","Q","W"]},names:{B:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0431\u0443\u0444\u0435\u0440\u0430",Q:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e",W:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043a\u0430\u043d\u0430\u043b\u0430"}};var w=function(e){var t=e.points,n=e.regions,c=Object(a.useMemo)((function(){return Object(l.a)({},y,{json:t})}),[t]);return t.length<2?null:r.a.createElement("div",{className:"chart"},r.a.createElement(v,Object.assign({},E,{data:c,regions:n})),r.a.createElement("svg",{className:"buffering-legend",width:"94",height:"14"},r.a.createElement("g",{className:"c3-legend-item"},r.a.createElement("text",{x:"16.0",y:"9"},"\u0411\u0443\u0444\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("line",{className:"c3-legend-item-tile",stroke:"#ecf2f7",strokeWidth:"10",x2:"10",y1:"4",y2:"4"}))))},N=n(24),B=n.n(N),k=n(11);var I=function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){var e=Object(k.setInterval)((function(){return n.current()}),t);return function(){return Object(k.clearInterval)(e)}}),[t])};var D=function(e){var t=e.onBuffering,n=e.onPoint,c=Object(a.useRef)();return Object(a.useEffect)((function(){var e=c.current.player,n=function(e){t({date:new Date,isBuffering:e.buffering})};return e.addEventListener("buffering",n),function(){e.removeEventListener("buffering",n)}}),[t]),I((function(){var e,t=c.current.player,a=t.getBufferedInfo(),r=t.getStats();n({date:new Date,B:Math.round((e=a.total,e.reduce((function(e,t){return e-t.start+t.end}),0))),Q:r.streamBandwidth,W:Math.round(r.estimatedBandwidth)})}),1e3),r.a.createElement("div",{className:"player",style:p},r.a.createElement(B.a,Object.assign({autoPlay:!0,src:"https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd",ref:c},p)))};var R=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.metrics})),n=t.points,c=t.regions,o=Object(a.useCallback)((function(t){var n=t.date,a=t.isBuffering;e((a?s:u)(n))}),[e]),l=Object(a.useCallback)((function(t){return e(function(e){return{type:"ADD_POINT",payload:e}}(t))}),[e]);return r.a.createElement("div",{className:"app"},r.a.createElement(D,{onBuffering:o,onPoint:l}),r.a.createElement(w,{points:n,regions:c}))},x=n(3),T=n(27),W=n(7),_={regions:[],points:[]},P=Object(x.combineReducers)({metrics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POINT":return Object(l.a)({},e,{points:[].concat(Object(W.a)(e.points),[t.payload]).slice(-10)});case"START_REGION":return Object(l.a)({},e,{regions:[].concat(Object(W.a)(e.regions),[{start:t.date}]).slice(-10)});case"END_REGION":var n=e.regions[e.regions.length-1],a=e.regions.slice(0,-1);return Object(l.a)({},e,{regions:[].concat(Object(W.a)(a),[Object(l.a)({},n,{end:t.date})])});default:return e}}}),S=function(){return Object(x.createStore)(P,Object(T.devToolsEnhancer)({}))};n(42),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=S(),C=function(){return r.a.createElement(i.a,{store:A},r.a.createElement(R,null))};o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.73331920.chunk.js.map